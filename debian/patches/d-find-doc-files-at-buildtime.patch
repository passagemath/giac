Description: Allow XCAS_ROOT override, so doc files can be found during the build
 By default the documentation build looks in /usr/share, leading to non-fatal
 errors like "// Unable to find keyword file doc/en/keywords".
Author: Ximin Luo <infinity0@debian.org>
Forwarded: not-needed

--- giac.orig/src/global.cc
+++ giac/src/global.cc
@@ -2770,6 +2770,10 @@
     if (!access((xcasroot()+"aide_cas").c_str(),R_OK)){
       return xcasroot();
     }
+    if (getenv("XCAS_ROOT")){
+      string s=getenv("XCAS_ROOT");
+      return s;
+    }
     if (xcasroot().size()>4 && xcasroot().substr(xcasroot().size()-4,4)=="bin/"){
       string s(xcasroot().substr(0,xcasroot().size()-4));
       s+="share/giac/";
@@ -2780,10 +2784,6 @@
 #ifdef __APPLE__
     if (!access("/Applications/usr/share/giac/",R_OK))
       return "/Applications/usr/share/giac/";
-    if (getenv("XCAS_ROOT")){
-      string s=getenv("XCAS_ROOT");
-      return s;
-    }
     return "/Applications/usr/share/giac/";
 #endif
 #ifdef WIN32
